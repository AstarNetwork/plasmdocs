---
description: The guide of using Metamask on substrate-based chains.
---

# Metamask support

The problem of using Metamask as same as any other Ethereum wallet for signing Substrate transactions is an impossibility to sign any ordinary data via standard API calls. For example, JSON-RPC API defines `eth_sign` call that should be used for signing. Unfortunately, this calls [prefix](https://web3js.readthedocs.io/en/v1.2.11/web3-eth-personal.html#sign) any passed data by `\0x19Ethereum Signed Message` that making it impossible for signing binary data, like Extrinsic. 

### Custom signatures pallet

The pallet that mitigates `eth_sign` problem is the [Custom Signatures pallet](https://github.com/PlasmNetwork/Plasm/tree/08c4a9211836b929abcbad4ed33ede0f616a6423/frame/custom-signatures). The main idea is moving signature validation out of substrate core and to provide for runtime developer a way to change it. 

```rust
impl pallet_custom_signatures::Trait for Runtime {
    type Event = Event;
    type Call = Call;
    type Signature = EthereumSignature;
    type Signer = <Signature as Verify>::Signer;
    type UnsignedPriority = EcdsaUnsignedPriority;
}
```

Here developer defines support for [EthereumSignature signing method](https://github.com/PlasmNetwork/Plasm/blob/08c4a9211836b929abcbad4ed33ede0f616a6423/frame/custom-signatures/src/ethereum.rs#L42), prefixed by `Ethereum Signed Message` string. Using this pallet the users can send unsigned transactions with dedicated parameter - signature, generated by any Ethereum-compatible wallet.

### User interface application

The Plasm team extends standard PolkadotJS Apps by custom signatures support page. The Custom Signature page allows the user to submit a transaction that was signed with an Ethereum private key and use it as a native ECDSA account in Substrate. Plus, you are able to use MetaMask for signature requests, which allows users to use their Ethereum address inside Ledger and Trezor to create a transaction.

![Signing transaction using Ledger + Metamask.](../.gitbook/assets/image%20%285%29.png)

